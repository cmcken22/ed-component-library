import{j as r}from"./jsx-runtime-Du8NFWEI.js";import{d as L,c as U,D as X,L as ee,A as te}from"./DatePicker-Bgh_D4xi.js";import{r as s}from"./index-Dl6G-zuu.js";import{w as ne,B as ae,u as le,I as N,g as re,a as w}from"./useCommonOnChangeHandler-DfyMK7Qn.js";import{a as I,I as k}from"./Icon.types-Cts1U0M4.js";import{T as oe}from"./testIds-CT2jQqrK.js";import{s as se}from"./index-B-KJ_PcS.js";import{s as ie}from"./index-DGPhUUWW.js";import{B as x}from"./Box-gQIt9B05.js";const ue=t=>{const u=t.replace(/ /g,"_"),n=[],o=/[^A-Za-z0-9\s]/g;let i;for(;(i=o.exec(u))!==null;)n.push(i.index);return n},de=(t,u)=>{const n=[];t[0]>0&&n.push([0,t[0]-1]);for(let o=0;o<t.length-1;o++)t[o]+1<t[o+1]&&n.push([t[o]+1,t[o+1]-1]);return t[t.length-1]<u-1&&n.push([t[t.length-1]+1,u-1]),n};L.extend(U);const pe=ie(x,{shouldForwardProp:se(["row","status","variant"]),slot:"root"})(({theme:t,status:u,disabled:n,variant:o})=>{var h;const i={error:t.palette.error.main,warning:t.palette.warning.main,success:t.palette.success.main};let p=i!=null&&i[u]?`${i==null?void 0:i[u]} !important`:t.palette.border.main;return n&&(p=t.palette.border.main),{backgroundColor:t.palette.common.white,...n&&{backgroundColor:(h=t.palette.charcoal)==null?void 0:h["5"]},border:"1px solid",borderRadius:"4px",display:"flex",alignItems:"center",width:"100%",borderColor:p,borderWidth:t.shape.borderWidth,".MuiInputBase-root":{width:"auto"},fieldset:{display:"none"},"&:hover":{borderColor:n?"":t.palette.primary.main},"&:focus-within":{borderColor:n?"":t.palette.primary.main},...o==="table"&&{height:"100%",border:"none",backgroundColor:"transparent"}}}),ce=({label:t,labelPosition:u="top",placeholder:n,helperText:o,required:i,disabled:p,variant:h,format:f,value:b,onChange:W,readOnly:C,color:D,hideCalendarIcon:j,inputRef:z,onClick:H,debounce:O,allowClear:q,endAdornment:d,persistEndAdornment:V})=>{const{status:K,endAdornment:m}=s.useContext(ae),A=le({onChange:W,debounce:O}),S=s.useRef(null),F=s.useRef(null),[a,v]=s.useState(b||[null,null]);s.useEffect(()=>{v(b||[null,null])},[b]);const G=s.useCallback(()=>j?null:r.jsx(N,{position:"start",sx:{ml:"8px"},children:r.jsx(I,{icon:k.Calendar,height:"20px",width:"20px"})}),[j]),P=s.useCallback((e,l,c)=>{if((e==null?void 0:e.key)!=="ArrowLeft"&&(e==null?void 0:e.key)!=="ArrowRight")return;const $=ue(f),T=de($,f.length),B=(e==null?void 0:e.key)==="ArrowRight"?1:-1,y=c===0?F.current:S.current;if(l.selectionEnd>=f.length&&B===1&&(y.focus(),y.setSelectionRange(0,0)),l.selectionStart===0&&B===-1){y.focus();const M=T[T.length-1],J=M[0],Q=M[1]+1;y.setSelectionRange(J,Q)}},[f]),g=s.useCallback((e,l)=>{const c=[...a];c[l]=e,v(c),A(c)},[a,v,A]),E=s.useCallback(e=>{g(null,e)},[g]),Y=s.useCallback(e=>{if(!q)return null;const l=[],c=a==null?void 0:a[e];return q&&c&&!p&&l.push(r.jsx(I,{icon:k.Close,size:20,sx:{flexShrink:0},color:"border.dark",onClick:()=>E(e)},"clear")),l.length?l:null},[m,d,V,q,p,a,E]),Z=s.useCallback(()=>{if(!d&&!m)return null;const e=[];return m&&e.push(m),(!d||d&&V)&&e.push(d),e.length?r.jsx(x,{sx:{height:"20px",width:"20px",mr:1,ml:.25,flexShrink:0,display:"flex",alignItems:"center",position:"relative"},children:r.jsx(N,{position:"end",sx:{position:"absolute",right:0,display:"flex",alignItems:"center",gap:"4px",".status-adornment":{ml:0}},children:e})}):null},[m,d,V]),_=s.useCallback(e=>r.jsx(X,{inputRef:e===0?S:F,format:f,disableOpenPicker:!0,value:a!=null&&a[e]?L(a==null?void 0:a[e]):null,readOnly:C,sx:{pointerEvents:C?"none":"all",fieldset:{border:"none"},".MuiInputBase-root":{input:{padding:0,paddingRight:.5}}},slotProps:{textField:{InputProps:{style:{height:"34px",padding:"0 !important",color:re(D,a==null?void 0:a[e])}},onKeyDown:l=>P(l,l.target,e),placeholder:Array.isArray(n)?n==null?void 0:n[e]:n}},disabled:p,onChange:l=>{g(l?l.toDate():null,e)}}),[P,f,a,g,n,p,C,D]);return r.jsxs(w,{children:[r.jsx(w.Label,{required:i,position:u,children:t}),r.jsx(pe,{ref:z,status:K,disabled:p,variant:h,onClick:H,"data-testid":oe.DATE_RANGE_FIELD,children:r.jsxs(ee,{dateAdapter:te,children:[G(),r.jsxs(x,{sx:{width:"100%",display:"flex",alignItems:"center",paddingRight:!d&&!m?1:0},children:[_(0),Y(0),r.jsx(I,{icon:k.ArrowRight,height:"16px",width:"16px",sx:{flexShrink:0,mx:.5}}),_(1),Y(1),Z()]}),d&&r.jsx(x,{sx:{mr:1},children:d})]})}),r.jsx(w.HelperText,{children:o})]})},R=ne(ce,"DateRangeField");R.defaultProps={format:"MMM DD, YYYY",placeholder:"MMM DD, YYYY",allowClear:!1};try{R.displayName="DateRangeField",R.__docgenInfo={description:"",displayName:"DateRangeField",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},sx:{defaultValue:null,description:"Style props for the container",name:"sx",required:!1,type:{name:"SxProps"}},format:{defaultValue:null,description:"",name:"format",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Date[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(value: Date[]) => void"}},hideCalendarIcon:{defaultValue:null,description:"",name:"hideCalendarIcon",required:!1,type:{name:"boolean"}},inputRef:{defaultValue:null,description:"",name:"inputRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},placeholder:{defaultValue:{value:"MMM DD, YYYY"},description:`Since there are two inputs, the placeholder can be an array of strings
@example ["Start date", "End date"]`,name:"placeholder",required:!1,type:{name:"string | string[]"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},labelPosition:{defaultValue:{value:"top"},description:"",name:"labelPosition",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"left"'}]}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any) => void"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"outlined"'},{value:'"standard"'},{value:'"table"'}]}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"warning"'},{value:'"error"'},{value:'"success"'}]}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"string"}},TooltipProps:{defaultValue:null,description:"",name:"TooltipProps",required:!1,type:{name:"TooltipProps"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},helperText:{defaultValue:null,description:"",name:"helperText",required:!1,type:{name:"string"}},startAdornment:{defaultValue:null,description:"",name:"startAdornment",required:!1,type:{name:"ReactNode"}},endAdornment:{defaultValue:null,description:"",name:"endAdornment",required:!1,type:{name:"ReactNode"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"(e: any) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"(e: any) => void"}},debounce:{defaultValue:null,description:"",name:"debounce",required:!1,type:{name:"number"}},persistEndAdornment:{defaultValue:null,description:"In the case that a staus is provided, the endAdornment will be hidden.\nSetting `persistEndAdornment` to true will keep the endAdornment visible beside the status icon.",name:"persistEndAdornment",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:null,description:"",name:"allowClear",required:!1,type:{name:"boolean"}}}}}catch{}export{R as D};
