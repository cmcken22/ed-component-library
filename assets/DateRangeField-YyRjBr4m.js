import{j as r}from"./jsx-runtime-Du8NFWEI.js";import{d as W,c as U,D as X,L as ee,A as te}from"./DatePicker-CvSs2x_p.js";import{r as o}from"./index-Dl6G-zuu.js";import{w as ne,B as ae,u as le,I as M,C as re,g as se,a as I}from"./useCommonOnChangeHandler-N2AHL1FM.js";import{a as N,I as L}from"./Icon.types-Cts1U0M4.js";import{T as oe}from"./testIds-BFSb8VRo.js";import{s as ie}from"./index-B-KJ_PcS.js";import{s as ue}from"./index-DGPhUUWW.js";import{B as x}from"./Box-gQIt9B05.js";const de=t=>{const u=t.replace(/ /g,"_"),n=[],s=/[^A-Za-z0-9\s]/g;let i;for(;(i=s.exec(u))!==null;)n.push(i.index);return n},pe=(t,u)=>{const n=[];t[0]>0&&n.push([0,t[0]-1]);for(let s=0;s<t.length-1;s++)t[s]+1<t[s+1]&&n.push([t[s]+1,t[s+1]-1]);return t[t.length-1]<u-1&&n.push([t[t.length-1]+1,u-1]),n};W.extend(U);const ce=ue(x,{shouldForwardProp:ie(["row","status","variant"]),slot:"root"})(({theme:t,status:u,disabled:n,variant:s})=>{var h;const i={error:t.palette.error.main,warning:t.palette.warning.main,success:t.palette.success.main};let p=i!=null&&i[u]?`${i==null?void 0:i[u]} !important`:t.palette.border.main;return n&&(p=t.palette.border.main),{backgroundColor:t.palette.common.white,...n&&{backgroundColor:(h=t.palette.charcoal)==null?void 0:h["5"]},border:"1px solid",borderRadius:"4px",display:"flex",alignItems:"center",width:"100%",borderColor:p,borderWidth:t.shape.borderWidth,".MuiInputBase-root":{width:"auto"},fieldset:{display:"none"},"&:hover":{borderColor:n?"":t.palette.primary.main},"&:focus-within":{borderColor:n?"":t.palette.primary.main},...s==="table"&&{height:"100%",border:"none",backgroundColor:"transparent"}}}),fe=({label:t,labelPosition:u="top",placeholder:n,helperText:s,required:i,disabled:p,variant:h,format:f,value:b,onChange:H,readOnly:C,color:R,hideCalendarIcon:k,inputRef:O,onClick:z,debounce:K,allowClear:q,endAdornment:d,persistEndAdornment:V})=>{const{status:G,endAdornment:m}=o.useContext(ae),j=le({onChange:H,debounce:K}),A=o.useRef(null),F=o.useRef(null),[a,v]=o.useState(b||[null,null]);o.useEffect(()=>{v(b||[null,null])},[b]);const Z=o.useCallback(()=>k?null:r.jsx(M,{position:"start",sx:{ml:"8px"},children:r.jsx(N,{icon:L.Calendar,height:"20px",width:"20px"})}),[k]),P=o.useCallback((e,l,c)=>{if((e==null?void 0:e.key)!=="ArrowLeft"&&(e==null?void 0:e.key)!=="ArrowRight")return;const w=de(f),_=pe(w,f.length),T=(e==null?void 0:e.key)==="ArrowRight"?1:-1,y=c===0?F.current:A.current;if(l.selectionEnd>=f.length&&T===1&&(y.focus(),y.setSelectionRange(0,0)),l.selectionStart===0&&T===-1){y.focus();const B=_[_.length-1],J=B[0],Q=B[1]+1;y.setSelectionRange(J,Q)}},[f]),g=o.useCallback((e,l)=>{const c=[...a];c[l]=e,v(c),j(c)},[a,v,j]),S=o.useCallback((e,l)=>{e==null||e.preventDefault(),e==null||e.stopPropagation(),g(null,l)},[g]),E=o.useCallback(e=>{if(!q)return null;const l=[],c=a==null?void 0:a[e];return q&&c&&!p&&l.push(r.jsx(re,{onClear:w=>S(w,e),sx:{flexShrink:0}},"clear")),l.length?l:null},[m,d,V,q,p,a,S]),$=o.useCallback(()=>{if(!d&&!m)return null;const e=[];return m&&e.push(m),(!d||d&&V)&&e.push(d),e.length?r.jsx(x,{sx:{height:"20px",width:"20px",mr:1,ml:.25,flexShrink:0,display:"flex",alignItems:"center",position:"relative"},children:r.jsx(M,{position:"end",sx:{position:"absolute",right:0,display:"flex",alignItems:"center",gap:"4px",".status-adornment":{ml:0}},children:e})}):null},[m,d,V]),Y=o.useCallback(e=>r.jsx(X,{inputRef:e===0?A:F,format:f,disableOpenPicker:!0,value:a!=null&&a[e]?W(a==null?void 0:a[e]):null,readOnly:C,sx:{pointerEvents:C?"none":"all",fieldset:{border:"none"},".MuiInputBase-root":{input:{padding:0,paddingRight:.5}}},slotProps:{textField:{InputProps:{style:{height:"34px",padding:"0 !important",color:se(R,a==null?void 0:a[e])}},onKeyDown:l=>P(l,l.target,e),placeholder:Array.isArray(n)?n==null?void 0:n[e]:n}},disabled:p,onChange:l=>{g(l?l.toDate():null,e)}}),[P,f,a,g,n,p,C,R]);return r.jsxs(I,{children:[r.jsx(I.Label,{required:i,position:u,children:t}),r.jsx(ce,{ref:O,status:G,disabled:p,variant:h,onClick:z,"data-testid":oe.DATE_RANGE_FIELD,children:r.jsxs(ee,{dateAdapter:te,children:[Z(),r.jsxs(x,{sx:{width:"100%",display:"flex",alignItems:"center",paddingRight:!d&&!m?1:0},children:[Y(0),E(0),r.jsx(N,{icon:L.ArrowRight,height:"16px",width:"16px",sx:{flexShrink:0,mx:.5}}),Y(1),E(1),$()]}),d&&r.jsx(x,{sx:{mr:1},children:d})]})}),r.jsx(I.HelperText,{children:s})]})},D=ne(fe,"DateRangeField");D.defaultProps={format:"MMM DD, YYYY",placeholder:"MMM DD, YYYY",allowClear:!1};try{D.displayName="DateRangeField",D.__docgenInfo={description:"",displayName:"DateRangeField",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},sx:{defaultValue:null,description:"Style props for the container",name:"sx",required:!1,type:{name:"SxProps"}},format:{defaultValue:null,description:"",name:"format",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Date[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(value: Date[]) => void"}},hideCalendarIcon:{defaultValue:null,description:"",name:"hideCalendarIcon",required:!1,type:{name:"boolean"}},inputRef:{defaultValue:null,description:"",name:"inputRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},placeholder:{defaultValue:{value:"MMM DD, YYYY"},description:`Since there are two inputs, the placeholder can be an array of strings
@example ["Start date", "End date"]`,name:"placeholder",required:!1,type:{name:"string | string[]"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},labelPosition:{defaultValue:{value:"top"},description:"",name:"labelPosition",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"left"'}]}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any) => void"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"outlined"'},{value:'"standard"'},{value:'"table"'}]}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"warning"'},{value:'"error"'},{value:'"success"'}]}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"string"}},TooltipProps:{defaultValue:null,description:"",name:"TooltipProps",required:!1,type:{name:"TooltipProps"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},helperText:{defaultValue:null,description:"",name:"helperText",required:!1,type:{name:"string"}},startAdornment:{defaultValue:null,description:"",name:"startAdornment",required:!1,type:{name:"ReactNode"}},endAdornment:{defaultValue:null,description:"",name:"endAdornment",required:!1,type:{name:"ReactNode"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"(e: any) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"(e: any) => void"}},debounce:{defaultValue:null,description:"",name:"debounce",required:!1,type:{name:"number"}},persistEndAdornment:{defaultValue:null,description:"In the case that a staus is provided, the endAdornment will be hidden.\nSetting `persistEndAdornment` to true will keep the endAdornment visible beside the status icon.",name:"persistEndAdornment",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:null,description:"",name:"allowClear",required:!1,type:{name:"boolean"}}}}}catch{}export{D};
