import{r as n,R as b}from"./index-Dl6G-zuu.js";import{u as E}from"./useEnhancedEffect-DZnfS5Iy.js";function p(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function x({controlled:e,default:t,name:r,state:o="value"}){const{current:u}=n.useRef(e!==void 0),[f,d]=n.useState(t),h=u?e:f,m=n.useCallback(y=>{u||d(y)},[]);return[h,m]}function D(e){const t=n.useRef(e);return E(()=>{t.current=e}),n.useRef((...r)=>(0,t.current)(...r)).current}function M(...e){return n.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{p(r,t)})},e)}const l={};function R(e,t){const r=n.useRef(l);return r.current===l&&(r.current=e(t)),r}const I=[];function T(e){n.useEffect(e,I)}class s{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new s}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function N(){const e=R(s.create).current;return T(e.disposeEffect),e}let i=!0,c=!1;const v=new s,w={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function V(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&w[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function C(e){e.metaKey||e.altKey||e.ctrlKey||(i=!0)}function a(){i=!1}function F(){this.visibilityState==="hidden"&&c&&(i=!0)}function L(e){e.addEventListener("keydown",C,!0),e.addEventListener("mousedown",a,!0),e.addEventListener("pointerdown",a,!0),e.addEventListener("touchstart",a,!0),e.addEventListener("visibilitychange",F,!0)}function g(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return i||V(t)}function A(){const e=n.useCallback(u=>{u!=null&&L(u.ownerDocument)},[]),t=n.useRef(!1);function r(){return t.current?(c=!0,v.start(100,()=>{c=!1}),t.current=!1,!0):!1}function o(u){return g(u)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:r,ref:e}}const O=b.createContext(null);export{O as T,M as a,A as b,D as c,x as d,s as e,p as s,N as u};
